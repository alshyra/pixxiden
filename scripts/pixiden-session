#!/usr/bin/env bash
# Pixxiden Session Launcher with Gamescope

# Résolution (peut être overridé)
RESOLUTION="${Pixxiden_RESOLUTION:-1920x1080}"
WIDTH=$(echo $RESOLUTION | cut -d'x' -f1)
HEIGHT=$(echo $RESOLUTION | cut -d'x' -f2)

# Vérifier que Gamescope est installé
if ! command -v gamescope &> /dev/null; then
    echo "Error: Gamescope is not installed"
    echo "Install it with: sudo pacman -S gamescope (Arch) or via Flatpak"
    exit 1
fi

# Vérifier que Pixxiden est installé
if ! command -v Pixxiden &> /dev/null; then
    echo "Error: Pixxiden is not installed"
    exit 1
fi

# Lancer Pixxiden avec Gamescope
exec gamescope \
    -W $WIDTH \
    -H $HEIGHT \
    -w $WIDTH \
    -h $HEIGHT \
    -f \
    -e \
    --force-grab-cursor \
    --adaptive-sync \
    -- Pixxiden --fullscreen --session-mode
